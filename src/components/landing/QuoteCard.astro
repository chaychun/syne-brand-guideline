---
interface Props {
  day: string;
  date: string;
  title: string;
  quote: string;
  activeIndex?: number;
  totalIndicators?: number;
}

const {
  day,
  date,
  title,
  quote,
  activeIndex = 0,
  totalIndicators = 3,
} = Astro.props;
---

<div class="quote-card relative overflow-hidden rounded-[18px] p-[18px_20px_16px]">
  <!-- Header row with date badge and title -->
  <div class="mb-3.5 flex items-center gap-3">
    <div class="date-badge flex size-10 shrink-0 flex-col items-center justify-center rounded-[10px]">
      <span class="font-heading text-[9px] font-semibold uppercase leading-none tracking-[0.02em] text-primary-600 dark:text-primary-400">
        {day}
      </span>
      <span class="font-heading text-[16px] font-bold leading-[1.1] text-neutral-800 dark:text-neutral-100">
        {date}
      </span>
    </div>
    <span class="font-heading text-[15px] font-semibold tracking-[-0.01em] text-neutral-800 dark:text-neutral-100">
      {title}
    </span>
  </div>

  <!-- Quote content area -->
  <div class="relative min-h-[72px] pr-9">
    <p class="font-body text-[15px] font-normal italic leading-[1.5] text-neutral-700 dark:text-neutral-300">
      {quote}
    </p>
    <!-- Large decorative closing quote -->
    <div class="quote-mark pointer-events-none absolute -bottom-2 -right-1 rotate-180 font-serif text-[72px] font-normal leading-none text-accent-peach opacity-70 dark:text-primary-600 dark:opacity-40">
      "
    </div>
  </div>

  <!-- Carousel indicators -->
  <div class="mt-4 flex items-center gap-1.5">
    {
      Array.from({ length: totalIndicators }).map((_, i) => (
        <span
          class:list={[
            "indicator h-1 rounded-sm transition-all duration-300",
            i === activeIndex
              ? "w-5 opacity-60 dark:opacity-50"
              : "w-1 opacity-[0.15] dark:opacity-20",
          ]}
        />
      ))
    }
  </div>
</div>

<style>
  .quote-card {
    background: linear-gradient(165deg, #ffecd9 0%, #ffe4cc 40%, #ffd9b8 100%);
  }
  :global([data-theme="dark"]) .quote-card {
    background: linear-gradient(165deg, #3d3228 0%, #352d24 40%, #2d261f 100%);
  }

  .date-badge {
    background: var(--color-neutral-0);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
  }
  :global([data-theme="dark"]) .date-badge {
    background: rgba(255, 255, 255, 0.12);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
  }

  .indicator {
    background: var(--color-neutral-800);
  }
  :global([data-theme="dark"]) .indicator {
    background: var(--color-neutral-100);
  }

  /* Tablet */
  @media (max-width: 1024px) {
    .quote-card {
      padding: 14px 16px;
      border-radius: 16px;
    }
    .date-badge {
      width: 36px;
      height: 36px;
    }
    .date-badge span:first-child {
      font-size: 8px;
    }
    .date-badge span:last-child {
      font-size: 14px;
    }
    .quote-card > div:first-child + span {
      font-size: 13px;
    }
    .quote-card p {
      font-size: 13px;
    }
    .quote-mark {
      font-size: 56px;
      right: -2px;
      bottom: -4px;
    }
    .quote-card > div:nth-child(2) {
      padding-right: 28px;
      min-height: 60px;
    }
  }

  /* Mobile */
  @media (max-width: 768px) {
    .quote-card {
      padding: 12px 14px;
      border-radius: 14px;
    }
    .quote-card > div:first-child {
      gap: 10px;
      margin-bottom: 10px;
    }
    .date-badge {
      width: 32px;
      height: 32px;
      border-radius: 8px;
    }
    .date-badge span:first-child {
      font-size: 7px;
    }
    .date-badge span:last-child {
      font-size: 12px;
    }
    .quote-card > div:first-child + span {
      font-size: 12px;
    }
    .quote-card p {
      font-size: 12px;
    }
    .quote-mark {
      font-size: 44px;
      right: 0;
      bottom: -2px;
    }
    .quote-card > div:nth-child(2) {
      padding-right: 22px;
      min-height: 48px;
    }
    .quote-card > div:last-child {
      margin-top: 12px;
      gap: 4px;
    }
    .indicator {
      height: 3px;
    }
    .indicator:first-child {
      width: 14px;
    }
  }
</style>
