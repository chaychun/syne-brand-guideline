---
import Logo from "./Logo.astro";
import Icon from "./Icon.astro";
import GlassContainer from "./GlassContainer.astro";
import GlassCard from "./GlassCard.astro";

// Landing page components
import BlobBackground from "./landing/BlobBackground.astro";
import FloatingCard from "./landing/FloatingCard.astro";
import QuoteCard from "./landing/QuoteCard.astro";
import BookCard from "./landing/BookCard.astro";
import VinylCard from "./landing/VinylCard.astro";
import LocationCard from "./landing/LocationCard.astro";
import ArticleCard from "./landing/ArticleCard.astro";
import SocialCard from "./landing/SocialCard.astro";
import SearchBar from "./landing/SearchBar.astro";
import PersonCard from "./landing/PersonCard.astro";
import PhoneMockup from "./landing/PhoneMockup.astro";
---

<div class="fixed inset-0 overflow-hidden bg-theme-bg font-body">
  <!-- Background -->
  <BlobBackground />

  <!-- Floating app elements -->
  <div class="floating-cards-container pointer-events-none absolute inset-0 max-md:z-[1]">
    <!-- Note card - Top left (visible on all screens, peek from edge on smaller) -->
    <FloatingCard class="left-[10%] top-[8%] w-[200px] max-lg:w-[180px] max-md:-left-[5%] max-md:top-[3%] max-md:w-[160px] max-sm:-left-[10%] max-sm:top-[2%] max-sm:w-[140px]" delay="0s">
      <GlassCard>
        <h3 class="mb-2.5 font-heading text-[15px] font-semibold leading-tight text-theme-fg">
          The cost of lost knowledge
        </h3>
        <p class="font-body text-xs leading-relaxed text-theme-fg-secondary">
          The US online recruiting market is massive: <span class="text-primary-500">$76.13bn</span> and growing at ~3% CAGR. It's a small loss that adds up quickly.
        </p>
      </GlassCard>
    </FloatingCard>

    <!-- Quote card - Top right (visible on all screens, peek from edge on smaller) -->
    <FloatingCard class="right-[18%] top-[6%] w-[300px] max-lg:right-[12%] max-lg:w-[260px] max-md:-right-[5%] max-md:top-[2%] max-md:w-[220px] max-sm:-right-[12%] max-sm:w-[200px]" delay="-1.5s">
      <GlassContainer>
        <QuoteCard day="MON" date="10" title="Thought of the day" quote="Nature does not hurry; yet everything is accomplished." />
      </GlassContainer>
    </FloatingCard>

    <!-- Book card - Left side (hidden at 1150px and below - too close to content) -->
    <FloatingCard class="left-[23%] top-[38%] w-[140px] max-[1150px]:hidden" delay="-3s">
      <BookCard title="Meditations" author="Marcus Aurelius" />
    </FloatingCard>

    <!-- Location card - Right side (only visible on large desktop) -->
    <FloatingCard class="bottom-[43%] right-[19%] w-[180px] max-[1150px]:hidden" delay="-2s">
      <LocationCard name="Eiffel Tower" address="Champ de Mars, Paris" />
    </FloatingCard>

    <!-- Article card - Bottom left (visible on all screens, peek from edge on smaller) -->
    <FloatingCard class="bottom-[12%] left-[14%] w-[190px] max-lg:left-[3%] max-lg:w-[170px] max-md:-left-[8%] max-md:bottom-[28%] max-md:w-[160px] max-sm:-left-[12%] max-sm:bottom-[32%]" delay="-4s">
      <ArticleCard source="The New Yorker" title="Should You Just Give Up?" />
    </FloatingCard>

    <!-- Social card - Bottom right (hidden at 1150px and below - too close to content) -->
    <FloatingCard class="bottom-[11%] right-[28%] w-[170px] max-[1150px]:hidden" delay="-1s">
      <SocialCard
        number="10"
        lines={["*logo tips*", "from a", "*type designer*"]}
        caption="10 Logo Design Tips from a Type Designer"
      />
    </FloatingCard>

    <!-- Vinyl/Music card - Right side (moves to location card spot on smaller screens) -->
    <FloatingCard class="right-[5%] top-[52%] w-[180px] max-[1150px]:right-[12%] max-[1150px]:top-[38%] max-lg:right-[3%] max-lg:top-[42%] max-lg:w-[160px] max-md:-right-[8%] max-md:top-[38%] max-md:w-[150px] max-sm:-right-[15%] max-sm:top-[35%]" delay="-2.5s">
      <VinylCard />
    </FloatingCard>

    <!-- Search bar (hidden on large and below) -->
    <FloatingCard class="right-[10%] top-[24%] max-lg:hidden" delay="-3.5s">
      <SearchBar placeholder="Search your thoughts..." />
    </FloatingCard>

    <!-- Space tag - subtle accent on mobile -->
    <FloatingCard class="bottom-[10%] left-[10%] max-md:bottom-[32%] max-md:left-[3%] max-sm:bottom-[38%]" delay="-4.5s">
      <div class="inline-flex items-center rounded-full border border-primary-100 bg-primary-50 px-3.5 py-2 font-heading text-[13px] font-medium text-primary-600 dark:border-primary-500/20 dark:bg-primary-500/10 dark:text-primary-400">
        <Icon name="folderOpen" size={14} class="mr-1.5" />
        Research
      </div>
    </FloatingCard>

    <!-- Connection count (hidden at 1150px and below - clutters center) -->
    <FloatingCard class="left-[26%] top-[36%] max-[1150px]:hidden" delay="-5s">
      <div class="rounded-xl border border-theme-glass-border bg-theme-glass-bg px-3.5 py-2.5 backdrop-blur-[20px]">
        <div class="flex items-center gap-2 font-body text-[13px] text-theme-fg-secondary">
          <Icon name="graph" size={16} class="text-primary-500" />
          <span>12 connections</span>
        </div>
      </div>
    </FloatingCard>

    <!-- Person card (hidden at 1150px and below - overlaps with note card) -->
    <FloatingCard class="left-[20%] top-[18%] max-[1150px]:hidden" delay="-1.2s">
      <PersonCard name="Sarah Chen" role="Designer" />
    </FloatingCard>
  </div>

  <!-- Main content -->
  <div class="content-wrapper relative z-10 flex h-full flex-col items-center justify-center px-6">
    <!-- Logo -->
    <div class="mb-6 text-theme-fg">
      <Logo width={90} />
    </div>

    <!-- Headline -->
    <h1 class="headline mb-3 text-center font-display font-semibold tracking-tight text-theme-fg">
      <span class="block">Where ideas</span>
      <span class="highlight-word relative inline-block text-primary-600 dark:text-primary-400">come alive</span>
    </h1>

    <!-- Subheadline -->
    <p class="mb-8 max-w-md text-center text-[17px] leading-relaxed text-theme-fg-secondary">
      A new way to capture thoughts, connect ideas, and create something meaningful.
    </p>

    <!-- Email signup -->
    <GlassContainer class="w-full max-w-[460px]">
      <form id="waitlist-form" class="flex items-center gap-2">
        <div class="flex-1">
          <input
            type="email"
            id="email-input"
            name="email"
            placeholder="Enter your email"
            aria-label="Email address"
            class="w-full rounded-2xl border border-theme-border bg-theme-card-bg px-4 py-3.5 font-body text-[15px] text-theme-fg placeholder:text-theme-fg-tertiary focus:border-primary-400 focus:outline-none focus:ring-[3px] focus:ring-primary-500/10"
          />
        </div>
        <button
          type="submit"
          class="flex items-center justify-center gap-2 whitespace-nowrap rounded-2xl bg-primary-500 px-6 py-3.5 font-heading text-[15px] font-medium text-white hover:bg-primary-600 active:scale-[0.98]"
        >
          <span>Join waitlist</span>
          <Icon name="arrowRight" size={16} />
        </button>
      </form>
    </GlassContainer>
  </div>

  <!-- Phone mockup -->
  <PhoneMockup />
</div>

<style>
  /* Headline sizing */
  .headline {
    font-size: clamp(40px, 8vw, 64px);
    line-height: 1.1;
    letter-spacing: -0.03em;
  }

  /* Highlight underline effect */
  .highlight-word::after {
    content: "";
    position: absolute;
    bottom: 2px;
    left: -4px;
    right: -4px;
    height: 0.35em;
    background: var(--color-primary-200);
    border-radius: 4px;
    z-index: -1;
    transform: rotate(-1deg);
  }
  :global([data-theme="dark"]) .highlight-word::after {
    background: rgba(242, 140, 62, 0.25);
  }

  /* Content padding for phone mockup */
  .content-wrapper {
    padding-bottom: 320px;
  }

  @media (max-width: 768px) {
    .content-wrapper {
      padding-bottom: 220px;
    }
  }

  @media (max-width: 480px) {
    .content-wrapper {
      padding-bottom: 200px;
    }
  }

  @media (max-height: 800px) {
    .content-wrapper {
      padding-bottom: 260px;
    }
  }

  @media (max-height: 700px) {
    .content-wrapper {
      padding-bottom: 200px;
    }
  }

  @media (max-height: 600px) {
    .content-wrapper {
      padding-bottom: 150px;
    }
  }

  @media (max-height: 500px) {
    .content-wrapper {
      padding-bottom: 100px;
    }
  }
</style>

<script>
  const form = document.getElementById("waitlist-form") as HTMLFormElement;
  const emailInput = document.getElementById("email-input") as HTMLInputElement;

  form?.addEventListener("submit", (e) => {
    e.preventDefault();
    // TODO: Implement waitlist API integration
    console.log("Beta signup:", emailInput.value);
  });
</script>
