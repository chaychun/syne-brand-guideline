---
import Logo from "./Logo.astro";
import PhoneFrame from "./PhoneFrame.astro";
import GlassCard from "./GlassCard.astro";
import GlassContainer from "./GlassContainer.astro";
import Icon from "./Icon.astro";
---

<div class="landing-page fixed inset-0 flex overflow-hidden font-body">
  <!-- Gradient blob -->
  <div class="pointer-events-none absolute left-1/4 top-1/3 size-[500px] -translate-x-1/2 -translate-y-1/2 rounded-full blur-[100px]" style="background: radial-gradient(circle, rgba(242,140,62,0.2) 0%, rgba(196,184,217,0.12) 60%, transparent 100%)"></div>

  <!-- Content -->
  <div class="relative z-10 flex flex-1 items-center justify-center gap-16 px-12">
    <!-- Phone mockup -->
    <div class="shrink-0">
      <PhoneFrame bg="var(--gradient-mist)">
        <div class="flex h-full flex-col px-4 pb-8 pt-6">
          <div class="flex flex-1 flex-col items-center justify-center">
            <div class="mb-6 size-[140px] rounded-full blur-[16px]" style="background: radial-gradient(circle, rgba(242,140,62,0.2) 0%, rgba(196,184,217,0.1) 60%, transparent 100%)"></div>
            <div class="-mt-16 mb-1.5 text-center font-heading text-[17px] font-semibold text-theme-fg">What's on your mind?</div>
            <div class="text-center text-[13px] text-theme-fg-secondary">Capture a note, link, or image</div>
          </div>
          <GlassCard style="margin-top: auto">
            <div class="min-h-[36px] text-[14px] text-theme-fg-tertiary">Start typing...</div>
            <div class="mt-2.5 flex items-center justify-between">
              <div class="flex gap-1.5">
                {(["camera", "link", "hash"] as const).map((icon) => (
                  <div class="flex size-7 items-center justify-center rounded-lg bg-theme-tag-bg">
                    <Icon name={icon} size={15} class="text-theme-fg-secondary" />
                  </div>
                ))}
              </div>
              <div class="flex size-8 items-center justify-center rounded-lg bg-theme-accent text-white">
                <Icon name="arrowUp" size={16} />
              </div>
            </div>
          </GlassCard>
        </div>
      </PhoneFrame>
    </div>

    <!-- Text and signup -->
    <div class="flex max-w-lg flex-col">
      <!-- Logo -->
      <div class="mb-6 text-theme-fg">
        <Logo width={140} />
      </div>

      <!-- Tagline -->
      <p class="text-body mb-8 text-theme-fg-secondary">
        A better way to think, create, and bring your ideas to life.
      </p>

      <!-- Single-line email signup -->
      <GlassContainer>
        <form id="waitlist-form" class="flex items-center gap-2">
          <div class="email-input flex flex-1 items-center overflow-hidden rounded-xl px-4 py-3">
            <input
              type="email"
              id="email-input"
              name="email"
              placeholder="Enter your email to join the waitlist"
              aria-label="Email address"
              class="text-body w-full border-none bg-transparent text-theme-fg outline-none"
            />
          </div>
          <button
            type="submit"
            class="flex size-12 shrink-0 cursor-pointer items-center justify-center rounded-xl border-none bg-theme-accent text-white"
          >
            <Icon name="arrowRight" size={20} />
          </button>
        </form>
      </GlassContainer>
    </div>
  </div>
</div>

<style>
  .landing-page {
    background: var(--gradient-mist);
  }

  .email-input {
    background: var(--theme-card-bg);
    border: 1px solid var(--theme-border);
  }
</style>

<script>
  const form = document.getElementById("waitlist-form") as HTMLFormElement;
  const emailInput = document.getElementById("email-input") as HTMLInputElement;

  form?.addEventListener("submit", (e) => {
    e.preventDefault();
    // TODO: Implement waitlist API integration
    console.log("Beta signup:", emailInput.value);
  });
</script>
